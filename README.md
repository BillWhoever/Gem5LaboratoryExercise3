# 3η Εργασία Αρχιτεκτονικής Προηγμένων Υπολογιστών
_του Βασιλείου Μπεσλεμέ και του Διονυσίου Δανιήλ Πλέσσα_<br>
[vampesle@ece.auth.gr](mailto:vampesle@ece.auth.gr), [dplessas@ece.auth.gr](mailto:dplessas@ece.auth.gr)<br>
9862, 9768

-------------------------------------------

## Βήμα 1ο

### 1.
Σύμφωνα με το [αρχικό paper](https://www.hpl.hp.com/research/mcpat/micro09.pdf), η επικύρωση των αποτελεσμάτων του McPAT έγινε με τη σύγκρισή τους με δημοσιευμένα δεδομένα για τους επεξεργαστές:
* SPARC Niagara (90nm, 1.2GHz, 1.2V)
* SPARC Niagara2 (65nm, 1.4GHz, 1.1V)
* Intel Xeon (65nm, 3.4GHz, 1.25V)
* Alpha 21364 (180nm, 1.2GHz, 1.5V)

Τα δεδομένα που χρησιμοποιήθηκαν, εκτός των άλλων, περιλαμβάνουν το ρυθμό ρολογιού, θερμοκρασίες λειτουργίας καθώς και άλλες αρχιτεκτονικές παραμέτρους.

Μελετήθηκαν η απόλυτη και η σχετική ακρίβεια των αποτελεσμάτων, τα οποία, εν τέλει, είναι αρκετά κοντά στα δημοσιευμένα δεδομένα.


### 2.
Υπάρχουν τρεις ισχύες οι οποίες απαρτίζουν τη συνολική ισχύ που καταναλώνει ένας επεξεργαστής, και αυτές είναι:
* Dynamic power: η δυναμική ισχύς είναι το άθροισμα δύο επιμέρους ισχύων, των:
	- Switching power: η ισχύς που καταναλώνεται στη φόρτιση/εκφόρτιση χωρητικοτήτων, όπως για παράδειγμα πυκνωτών αλλά και των πυλών MOSFETs.
	- Short-circuit power: η ισχύς που καταναλώνεται κατά το στιγμιαίο βραχυκύκλωμα της τάσης τροφοδοσίας με την γείωση, καθώς ένα MOSFET αλλάζει κατάσταση.
* Static/leakage power: η ισχύς που καταναλώνεται από ρεύματα διαρροών, π.χ. DC ρεύματα ανάστροφης πόλωσης διόδων, διαρροής πυκνωτών, διαρροής πύλης-πηγής (Igss) και διαρροής εκροής-πηγής (Ιdss) των MOSFETs.

<font size="2">
Αρκετά ενδιαφέρον είναι το γεγονός ότι σε αρχιτεκτονικές μικρότερες των 90nm, η ισχύς διαρροής υπερέχει των άλλων τύπων ισχύων, ενώ σε μεγαλύτερες των 90nm, η ισχύς switching είναι αυτή που ευθύνεται για την κατανάλωση του μεγαλύτερου ποσοστού της ενέργειας. 
</font>

Κατά την εκτέλεση διαφορετικών προγραμμάτων, θα αναμέναμε το πιο "βαρύ" πρόγραμμα, δηλαδή αυτό που χρησιμοποιεί τον επεξεργαστή για μεγαλύτερο χρονικό διάστημα (μεγαλύτερο CPU time), να καταναλώνει μεγαλύτερη δυναμική ισχύ, αφού οδηγεί τα transistors του επεξεργαστή σε περισσότερες εναλλαγές κατάστασης. Από την άλλη, όσο μεγαλύτερο χρόνο εκτέλεσης έχει ένα πρόγραμμα (χωρίς να αυξάνεται απαραίτητα το CPU time, όπως για παράδειγμα στις καθυστερήσεις που οφείλονται στα περιφερειακά και την αλληλεπίδραση του χρήστη), τόσο αυξάνεται η ισχύς διαρροής, η οποία είναι κυρίαρχη για επεξεργαστές με transistors μικρότερου μεγέθους.


### 3.
Στην περίπτωση που στόχος της συσκευής είναι η εκτέλεση μιας συγκεκριμένης διεργασίας, ύστερα από την οποία ο επεξεργαστής θα αδρανοποιείται, τη μεγαλύτερη διάρκεια ζωής μπαταρίας θα έχει η συσκευή με τον πιο ενεργειακά αποδοτικό επεξεργαστή, δηλαδή αυτόν που μπορεί να παρέχει μεγαλύτερη υπολογιστική ισχύ ανά μονάδα ενέργειας. Το τελευταίο είναι ένα κριτήριο που δεν εξαρτάται από το TDP (thermal power design) της CPU. Σε περίπτωση που η χρήση του συστήματος επαφίεται στον χρήστη (όπως γίνεται με τους προσωπικούς υπολογιστές), ο οποίος συχνά επιλέγει πιο απαιτητικό λογισμικό, ανάλογα με τις δυνατότητες του συστήματος που διαθέτει, η επιλογή του δεύτερου επεξεργαστή ενδεχομένως να οδηγούσε σε μικρότερη διάρκεια μπαταρίας, παρά το γεγονός ότι μπορεί να είναι πιο αποδοτικός.

To McPAT από μόνο του, δεν είναι αρκετό για να αποφασίσουμε για την ενεργειακή αποδοτικότητα ενός επεξεργαστή. Για το τελευταίο, θα μας ήταν απαραίτητο να γνωρίζουμε και το χρόνο εκτέλεσης ενός benchmark για παράδειγμα, ώστε να υπολογίσουμε ένα μέγεθος όπως το PDP (Power Delay Product) ή το EDP (Energy Delay Product), το οποίο θα ήταν ενδεικτικό της ενεργειακής αποδοτικότητας του συστήματος. Τέτοια δεδομένα, θα μπορούσαμε να εξάγουμε από τον προσομοιωτή Gem5 για παράδειγμα.


### 4.
Παρατηρώντας τα αποτελέσματα του McPAT για τους δύο επεξεργαστές, προκύπτει ότι η ισχύς διαρροής του Xeon (36.832 W) είναι αρκετά μεγαλύτερη από αυτή του A9 (0.109 W). Δεδομένου ότι το πρόγραμμα τρέχει 40 φορές πιο γρήγορα στον Xeon, υπολογίζουμε ότι η ελάχιστη δυνατή ενέργεια που απαιτείται για την εκτέλεση του προγράμματος είναι `36.832 * (1 / 40) = 0.921` (μονάδες χρόνου * W), ενώ για τον A9 `0.109 * 1 = 0.109` (μονάδες χρόνου * W).

Στους παραπάνω υπολογισμούς, χρησιμοποιήσαμε μόνο την ισχύ διαρροής, αφού αυτή, σε αντίθεση με τη δυναμική ισχύ, δεν επηρεάζεται από το είδος του προγράμματος που εκτελείται και επειδή είναι η μόνη μορφή ισχύος που καταναλώνεται ακόμα και αν ο επεξεργαστής είναι σε αδράνεια. Ωστόσο, η CPU Xeon θα μπορούσε να έχει αρκετά μικρότερη δυναμική ισχύ από την A9 και να ανατρέπει τελικά το αποτέλεσμα (για ένα συγκεκριμένο χρονικό παράθυρο, όπου η μεγαλύτερη ισχύς διαρροής του Xeon δε θα ανέτρεπε, ξανά, το αποτέλεσμα). Πραγματοποιώντας τους ίδιους υπολογισμούς, χρησιμοποιώντας τη δυναμική ισχύ αυτή τη φορά, καταλήγουμε στο ίδιο συμπέρασμα. Επομένως, ανεξάρτητα από το πρόγραμμα που χρησιμοποιείται, θα μπορούσαμε να πούμε ότι ο Α9 είναι πιο ενεργειακά αποδοτικός, παρότι είναι αρκετά πιο αργός από τον Intel Xeon.

[Πηγή](https://semiengineering.com/knowledge_centers/low-power/low-power-design/power-consumption/)